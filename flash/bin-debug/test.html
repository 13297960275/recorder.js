<html>
  <head>
    <title>Recorder!</title>
    <script src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script>
      var RECORDER;      

      function Recorder(swfObject){
        this.swfObject   = swfObject;
        this.isPlaying   = false;
        this.isRecording = false;
        
        this.send = function(message){
          return swfObject.sendToActionScript(message);
        };
        
        this.setPostURI = function(uri){
          return this.send('setPostURI ' + uri);
        };
        
        this.startRecording = function(){
          this.isRecording = true;
          return this.send('startRecording');
        };
        
        this.stopRecording = function(){
          this.isRecording = false;
          return this.send('stopRecording');
        };
        
        this.startPlaying = function(){
          this.isPlaying = true;
          return this.send('startPlaying');
        };
        
        this.stopPlaying = function(){
          this.isPlaying = false;
          return this.send('stopPlaying');
        };
        
        this.getDebugLog = function(){
          return this.send('getDebugLog');
        };
      }
      
      $(document).ready(function(){
        var postURI = "http://localhost:3000/upload";
        
        RECORDER = new Recorder($('#recorder2')[0]);
        
        $('a#record').click(function(){
          RECORDER.setPostURI(postURI);
          
          if(RECORDER.isRecording){
            RECORDER.stopRecording();
          }else{
            RECORDER.startRecording();
          }
        });
        
        $('a#play').click(function(){
          if(RECORDER.isPlaying){
            RECORDER.stopPlaying();
          }else{
            RECORDER.startPlaying();
          }
        });
      });
    </script>    
  </head>
  <body bgcolor="lightgreen">

      
  <object id="recorder1" height="100" width="100"> <param name="wmode" value="transparent"> <param name="movie" value="Recorder.swf"></param> <param name="allowscriptaccess" value="always"></param> 
  <embed id="recorder2" allowscriptaccess="always" wmode="transparent" name="rec" height="100" width="100" src="Recorder.swf" type="application/x-shockwave-flash">
  </embed></object>
    
  <a href="#" id="record">Record!</a>
  <a href="#" id="play">Play!</a>
  <a href="#" id="save">Save!</a>
  
      
  </body>
</html>
      